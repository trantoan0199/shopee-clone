import{u as N,o as v,r as b,A as y,a as w,b as E,p as d,i as S,j as e,H as A,L as C,s as k,c as L}from"./index-C2mn7hxx.js";import{B as M}from"./Button-C_YtmuGB.js";import{I as p}from"./Input-Be6M7vZh.js";const P=k.pick(["email","password"]);function H(){var i,l;const{handleSubmit:g,formState:{errors:n},register:o,setError:h}=N({resolver:v(P)}),{setIsAuthenticated:x,setProfile:u}=b.useContext(y),j=w(),a=E({mutationFn:t=>L.login(t)}),f=g(t=>{a.mutate(t,{onSuccess:s=>{x(!0),u(s.data.data.user),j(d.home)},onError:s=>{var c;if(S(s)){const r=(c=s.response)==null?void 0:c.data.data;r&&Object.keys(r).forEach(m=>{h(m,{message:r[m],type:"Server"})})}}})});return e.jsxs("div",{className:"bg-orange",children:[e.jsxs(A,{children:[e.jsx("title",{children:"Đăng nhập | Shopee Clone"}),e.jsx("meta",{name:"description",content:"Đăng nhập vào dự án Shopee Clone"})]}),e.jsx("div",{className:"container",children:e.jsx("div",{className:"grid grid-cols-1 py-12 lg:grid-cols-5 lg:py-32 lg:pr-10",children:e.jsx("div",{className:"lg:col-span-2 lg:col-start-4",children:e.jsxs("form",{className:"rounded bg-white p-10 shadow-sm",onSubmit:f,noValidate:!0,children:[e.jsx("div",{className:"text-2xl",children:"Đăng nhập"}),e.jsx(p,{className:"mt-8",name:"email",type:"email",register:o,placeholder:"Email",errorMessage:(i=n.email)==null?void 0:i.message}),e.jsx(p,{className:"mt-3",name:"password",type:"password",placeholder:"Password",register:o,autoComplete:"on",errorMessage:(l=n.password)==null?void 0:l.message}),e.jsx("div",{className:"mt-3",children:e.jsx(M,{type:"submit",className:"flex w-full items-center justify-center bg-red-500 py-4 px-2 text-sm uppercase text-white hover:bg-red-600",isLoading:a.isPending,disabled:a.isPending,children:"Đăng nhập"})}),e.jsxs("div",{className:"mt-8 flex items-center justify-center",children:[e.jsx("span",{className:"text-gray-400",children:"Bạn chưa có tài khoản?"}),e.jsx(C,{className:"ml-1 text-red-400",to:d.register,children:"Đăng ký"})]})]})})})})]})}export{H as default};
