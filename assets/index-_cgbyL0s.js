import{u as v,o as y,r as b,A as E,a as S,b as A,K as C,p as g,i as k,j as e,H as M,L as P,s as _,c as B}from"./index-C2mn7hxx.js";import{I as i}from"./Input-Be6M7vZh.js";import{B as I}from"./Button-C_YtmuGB.js";const L=_.pick(["email","password","confirm_password"]);function K(){var c,l,m;const{handleSubmit:h,register:a,setError:u,formState:{errors:t}}=v({resolver:y(L)}),{setIsAuthenticated:x,setProfile:f}=b.useContext(E),j=S(),r=A({mutationFn:o=>B.registerAccount(o)}),w=h(o=>{const N=C(o,["confirm_password"]);r.mutate(N,{onSuccess:s=>{x(!0),f(s.data.data.user),j(g.home)},onError:s=>{var d;if(k(s)){const n=(d=s.response)==null?void 0:d.data.data;n&&Object.keys(n).forEach(p=>{u(p,{message:n[p],type:"Server"})})}}})});return e.jsxs("div",{className:"bg-orange",children:[e.jsxs(M,{children:[e.jsx("title",{children:"Đăng ký | Shopee Clone"}),e.jsx("meta",{name:"description",content:"Đăng ký vào dự án Shopee Clone"})]}),e.jsx("div",{className:"container",children:e.jsx("div",{className:"grid grid-cols-1 py-12 lg:grid-cols-5 lg:py-32 lg:pr-10",children:e.jsx("div",{className:"lg:col-span-2 lg:col-start-4",children:e.jsxs("form",{className:"rounded bg-white p-10 shadow-sm",onSubmit:w,noValidate:!0,children:[e.jsx("div",{className:"text-2xl",children:"Đăng ký"}),e.jsx(i,{className:"mt-8",name:"email",type:"email",register:a,placeholder:"Email",errorMessage:(c=t.email)==null?void 0:c.message}),e.jsx(i,{className:"mt-2",name:"password",type:"password",register:a,autoComplete:"on",placeholder:"Password",errorMessage:(l=t.password)==null?void 0:l.message}),e.jsx(i,{className:"mt-2",name:"confirm_password",type:"password",register:a,placeholder:"Confirm password",autoComplete:"on",errorMessage:(m=t.confirm_password)==null?void 0:m.message}),e.jsx("div",{className:"mt-2",children:e.jsx(I,{type:"submit",className:"flex  w-full items-center justify-center bg-red-500 py-4 px-2 text-sm uppercase text-white hover:bg-red-600",isLoading:r.isPending,disabled:r.isPending,children:"Đăng nhập"})}),e.jsxs("div",{className:"mt-8 flex items-center justify-center",children:[e.jsx("span",{className:"text-gray-400",children:"Bạn đã có tài khoản?"}),e.jsx(P,{className:"ml-1 text-red-400",to:g.login,children:"Đăng nhập"})]})]})})})})]})}export{K as default};
